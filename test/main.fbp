INPORT=Ai.In:Text
INPORT=Merge.Ctx:Ctx
INPORT=Voice.In:Voice

Ai(ApiAi) Out -> Result Merge()
Merge(QuerySave) Out -> Ctx CM(ContextManager)

CM() Process -> Ctx OrderPrinterDispatcher(IntentCheck)
OrderPrinterDispatcher() Out -> Ctx OrderPrinter(OrderPrinter)
OrderPrinter() Out -> In Reply(Final)

OrderPrinterDispatcher() Next -> Ctx OrderCancelDispatcher(IntentCheck)
OrderCancelDispatcher() Out -> Ctx OrderCancel(OrderCancel)
OrderCancel() Out -> In Reply()

OrderCancelDispatcher() Next -> Ctx AdressIntDispatcher(IntentCheck)
AdressIntDispatcher() Out -> Ctx OrderAddress(OrderAddress)
OrderAddress() Out -> In Reply()

AdressIntDispatcher() Next -> Ctx CustomerIntDispatcher(IntentCheck)
CustomerIntDispatcher() Out -> Ctx OrderCustomer(OrderCustomer)
OrderCustomer() Out -> In Reply()

CustomerIntDispatcher() Next -> Ctx OrderIntDispatcher(IntentCheck)
OrderIntDispatcher() Out -> Ctx OpenOrder(Order)
OpenOrder() New -> Ctx NewOrder(NewOrder)
OpenOrder() Patch -> Ctx PatchOrder(PatchOrder)
OpenOrder() Out -> In Reply()

NewOrder() Out -> In Reply()
NewOrder() Notice -> Ctx OperationNotice(OperationNotice)
PatchOrder() Out -> In Reply()
OperationNotice() Out -> In Reply()

OrderIntDispatcher() Next -> Ctx Unimplemented(Unimplemented)
Unimplemented() Out -> In Reply()

Voice(Voice) Out -> In Reply()

'dfadsafdsafdsafdsafdsa' -> Token Voice()

'4ae1a59715104c32a6bacabd88cfc070' -> Token Ai()
'123456789' -> SessionId Ai()

5 -> ExpireMinutes OpenOrder()

'今天' -> Deftime NewOrder()

'business.order.create.address' -> Intent AdressIntDispatcher()
0.7 -> Score AdressIntDispatcher()

'business.order.create.customer' -> Intent CustomerIntDispatcher()
0.7 -> Score CustomerIntDispatcher()

'business.order.current.display' -> Intent OrderPrinterDispatcher()
0.7 -> Score OrderPrinterDispatcher()

'business.order.create.cancel' -> Intent OrderCancelDispatcher()
0.7 -> Score OrderCancelDispatcher()

'business.order.create' -> Intent OrderIntDispatcher()
0.7 -> Score OrderIntDispatcher()
# # 'products' -> Type TryProducts()

# CM() Process -> Ctx PraiseIntDispatcher(IntentCheck)
# PraiseIntDispatcher() Out -> Ctx Praise(Praise)
# Praise() Out -> In Reply(Final)

# PraiseIntDispatcher() Next -> Ctx CriIntDispatcher(IntentCheck)
# CriIntDispatcher() Out -> Ctx Critical(Critical)
# Critical() Out -> In Reply()

# CriIntDispatcher() Next -> Ctx AbuseIntDispatcher(IntentCheck)
# AbuseIntDispatcher() Out -> Ctx Abuse(Abuse)
# Abuse() Out -> In Reply()

# AbuseIntDispatcher() Next -> Ctx GreetIntDispatcher(IntentCheck)
# GreetIntDispatcher() Out -> Ctx Greet(Greet)
# Greet() Out -> In Reply()

# GreetIntDispatcher() Next -> Ctx RobotIntDispatcher(IntentCheck)
# RobotIntDispatcher() Out -> Ctx Robot(Robot)
# Robot() Out -> In Reply()

# RobotIntDispatcher() Next -> Ctx StockIntDispatcher(IntentCheck)
# StockIntDispatcher() Out -> Ctx StockQuery(StockQuery)
# StockQuery() Out -> In Reply()

# StockIntDispatcher() Next -> Ctx PriceIntDispatcher(IntentCheck)
# PriceIntDispatcher() Out -> Ctx PriceQuery(PriceQuery)
# PriceQuery() Out -> In Reply()

# PriceIntDispatcher() Next -> Ctx OrderIntDispatcher(IntentCheck)


# '表扬' -> Intent PraiseIntDispatcher()
# 0.40 -> Score PraiseIntDispatcher()

# '批评' -> Intent CriIntDispatcher()
# 0.40 -> Score CriIntDispatcher()

# '辱骂' -> Intent AbuseIntDispatcher()
# 0.40 -> Score AbuseIntDispatcher()

# '招呼' -> Intent GreetIntDispatcher()
# 0.40 -> Score GreetIntDispatcher()

# '关于机器人' -> Intent RobotIntDispatcher()
# 0.40 -> Score RobotIntDispatcher()

# '问货' -> Intent StockIntDispatcher()
# 0.40 -> Score StockIntDispatcher()

# '问价' -> Intent PriceIntDispatcher()
# 0.40 -> Score PriceIntDispatcher()



# # FOR TEST
# INPORT=Line.Ctx:In
 
# Line(MyInput) Out -> In Luis(LuisAnalyze)
# Line() Next -> Ctx Merge(QuerySave)
# Luis() Out -> Result Merge()
# Merge() Out -> Ctx CM(ContextManager)
# CM() Process -> Ctx IntentDispatcher(IntentCheck)
# IntentDispatcher() Out -> Ctx OpenOrder(Order)
# OpenOrder() Out -> In reply(Final)

# '8b65b31f-05b0-4da0-ab98-afa62c0e80ae' -> AppId Luis()
# '9c6711ad95c846a792248515cb6d1a23' -> Key Luis()
# '请输入你的话' -> Prompt Line()
# '开单' -> Intent IntentDispatcher()
# 0.70 -> Score IntentDispatcher()