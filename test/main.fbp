INPORT=Luis.In:Text
INPORT=Merge.Ctx:Ctx

Luis(LuisAnalyze) Out -> Result Merge()
Merge(QuerySave) Out -> Ctx CM(ContextManager)
CM() Process -> Ctx PraiseIntDispatcher(IntentCheck)
PraiseIntDispatcher() Out -> Ctx Praise(Praise)
Praise() Out -> In Reply(Final)

PraiseIntDispatcher() Next -> Ctx CriIntDispatcher(IntentCheck)
CriIntDispatcher() Out -> Ctx Critical(Critical)
Critical() Out -> In Reply()

CriIntDispatcher() Next -> Ctx AbuseIntDispatcher(IntentCheck)
AbuseIntDispatcher() Out -> Ctx Abuse(Abuse)
Abuse() Out -> In Reply()

AbuseIntDispatcher() Next -> Ctx GreetIntDispatcher(IntentCheck)
GreetIntDispatcher() Out -> Ctx Greet(Greet)
Greet() Out -> In Reply()

GreetIntDispatcher() Next -> Ctx StockIntDispatcher(IntentCheck)
StockIntDispatcher() Out -> Ctx StockQuery(StockQuery)
StockQuery() Out -> In Reply()

StockIntDispatcher() Next -> Ctx OrderIntDispatcher(IntentCheck)
OrderIntDispatcher() Out -> Ctx OpenOrder(Order)
OpenOrder() Out -> In Reply()

OrderIntDispatcher() Next -> Ctx Unimplemented(Unimplemented)
Unimplemented() Out -> In Reply()

'8b65b31f-05b0-4da0-ab98-afa62c0e80ae' -> AppId Luis()
'9c6711ad95c846a792248515cb6d1a23' -> Key Luis()

'表扬' -> Intent PraiseIntDispatcher()
0.40 -> Score PraiseIntDispatcher()

'批评' -> Intent CriIntDispatcher()
0.40 -> Score CriIntDispatcher()

'辱骂' -> Intent AbuseIntDispatcher()
0.40 -> Score AbuseIntDispatcher()

'招呼' -> Intent GreetIntDispatcher()
0.40 -> Score GreetIntDispatcher()

'问货' -> Intent StockIntDispatcher()
0.70 -> Score StockIntDispatcher()

'开单' -> Intent OrderIntDispatcher()
0.70 -> Score OrderIntDispatcher()
# # 'products' -> Type TryProducts()



# # FOR TEST
# INPORT=Line.Ctx:In
 
# Line(MyInput) Out -> In Luis(LuisAnalyze)
# Line() Next -> Ctx Merge(QuerySave)
# Luis() Out -> Result Merge()
# Merge() Out -> Ctx CM(ContextManager)
# CM() Process -> Ctx IntentDispatcher(IntentCheck)
# IntentDispatcher() Out -> Ctx OpenOrder(Order)
# OpenOrder() Out -> In reply(Final)

# '8b65b31f-05b0-4da0-ab98-afa62c0e80ae' -> AppId Luis()
# '9c6711ad95c846a792248515cb6d1a23' -> Key Luis()
# '请输入你的话' -> Prompt Line()
# '开单' -> Intent IntentDispatcher()
# 0.70 -> Score IntentDispatcher()